<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="board">
	<select id="findAll" resultType="boardvo">
		 <![CDATA[
		 select a.no, a.title, a.contents, a.hit, date_format(a.reg_date, '%Y/%m/%d %H:%i:%s'),
		        a.group_no, a.order_no, a.depth, a.user_no, b.name
		   from board a, user b
		  where a.user_no = b.no
	   order by reg_date desc, group_no desc, order_no asc
		 ]]>
	 </select>
	 
	 <insert id="insert" parameterType="boardvo">
	 	<![CDATA[
	 	insert 
	 	  into board 
	 	values(null, #{title }, #{contents }, 1, date_format(now(), '%Y/%m/%d %H:%i:%s'),
					(select max(group_no))+1, 1, 0, #{user_no })
	 	]]>
	 </insert>
	 
	 <update id="update" parameterType="boardvo">
	 	<![CDATA[
	 	update board
	 	   set title=#{title }, contents=#{contents } where no=#{no }
	 	]]>
	 </update>
</mapper>